---
title: Noodle 1 - Transforming .fit
layout: default
permalink: /fit_1/
---

<div style="border: 1px solid #ddd; background-color: #f9f9f9; padding: 1.5rem; margin-bottom: 2rem; border-radius: 6px;">
  <h2 style="margin-top: 0; font-size: 1.5rem;">The .fit File Format</h2>
  <p style="font-size: 1.1rem; line-height: 1.6; margin: 0;">
We cannot open and read raw .fit files in the form generated by sports sensor devices — we will just see a jumble of symbols. It is a binary file consisting of a continuous stream of structured data.
</p>

<p>
It is organised into three sections:
</p>

<p>
1. <strong>File Header:</strong> The first 12 or 14 bytes of the file containing metadata about the file itself, including:<br />
&nbsp;&nbsp;1. Header size (1 byte).<br />
&nbsp;&nbsp;2. Protocol and profile version numbers (1 byte each).<br />
&nbsp;&nbsp;3. Data size (4 bytes): The length of the subsequent Data Records section in bytes.<br />
&nbsp;&nbsp;4. The ASCII string ".FIT" (4 bytes): Used to identify the file type.<br />
&nbsp;&nbsp;5. An optional CRC (2 bytes) for the header itself.
</p>

<p>
2. <strong>Data Records Section:</strong> This is the section we will parse and is the main body of the file. It contains a sequence of encoded messages. The records vary in length and consist of two types that appear sequentially:<br />
&nbsp;&nbsp;1. Definition Messages: These act as templates for the subsequent data messages. A definition message specifies the global message type ('record', 'lap'), the number of fields, and the format (data type, size, etc).<br />
&nbsp;&nbsp;2. Data Messages: These contain the actual sensor data and events (heart rate, GPS coordinates, speed, time, power, etc) formatted as described by the preceding definition message.
</p>

<p>
3. <strong>File CRC:</strong> The final 2 bytes of the file contain a 16-bit CRC (checksum) for the entire file content, used for data integrity verification.
</p>

<p>
The raw data is stored in an optimised, compact binary format, which is why I used the fitparse library to parse and interpret the messages into a structured, readable format.
</p>
</div>


---

<p style="margin-top: 2rem;">
  <a href="/portfolio-toby-draper/background/" style="font-size: 1rem; text-decoration: none; color: #007acc;">← Back to previous</a>
</p>
<p style="margin-top: 2rem;">
  <a href="/portfolio-toby-draper/" style="font-size: 1rem; text-decoration: none; color: #007acc;">← Back to Home</a>
</p>
